<head>
    {% macro aptitudeList(items)%}
    <ul>
        {% for item in items%}
        <li>
            {{item.name}} : {{item.description}}
        </li>{% endfor %}
    </ul>
    {% endmacro %} {% from 'bootstrap5/form.html' import render_form %}

    <title>{{ title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

    <body>
        <div class="">
            <header class="App">
                <h1>
                    {{pj.first_name}} {{pj.last_name}} {{pj.age}} ans
                </h1>
                <h2>{{personnage.classe}}</h2>
                <h3>Description</h3>
                <p>{{pj.description}}</p>
            </header>
            <main>
                <section>
                    <h2>Presentation</h2>
                    <div>
                        <p>BBA/lutte : ({{pj.bba}}/{{pj.bba-5}}/{{pj.bba-10}})/{{pj.bba+pj.for}}</p>
                        <p>Att cac : + {{(pj.for-10)//2+pj.bba}}</p>
                        <p>Att dist : + {{(pj.dex-10)//2+pj.bba}}</p>
                        <p>PV : {{pj.pv_max}}</p>
                        <p>Allonge/Espace occupée : {{pj.allonge}}m/{{pj.espace_occupe}}m </p>
                        <p>Vitesse de déplacement: {{pj.vm}} m ({{pj.vm -3}}m avec harnois) </p>
                        <p>Attaques :
                            <ul>
                                {% for weapon in weapons.values() %}
                                <li>
                                    {{weapon.name|e}} (+ {{ (pj.for-10)//2+pj.bba+weapon.bonus}}, {{weapon.degat}}, {{weapon.critique}})
                                </li>
                                {% endfor %}
                            </ul>
                        </p>
                        <p>Attaques à outrance:
                            <ul>
                                {% for weapon in weapons.values() %}
                                <li>
                                    {{weapon.name|e}} (+ {{ (pj.for-10)//2+pj.bba+weapon.bonus}}/ {{ (pj.for-10)//2+pj.bba + weapon.bonus - 5 }} / {{ (pj.for-10)//2+pj.bba + weapon.bonus -10}}, {{weapon.degat}}, {{weapon.critique}})
                                </li>
                                {% endfor %}
                            </ul>
                        </p>
                        <p>
                            CA
                            <ul>
                                <li>{{ armor.harnois.name }}: {{ca.harnois}} (+{{(pj.dex-10)//2}} Dex, +{{armor.harnois["bonus_ca"]}} Harnois, +{{armor.pavois["bonus_ca"]}} Pavois) Dépourvu=CA Contact={{ca.harnois - armor.harnois.bonus_ca}}
                                </li>
                                <li>{{ armor.cuirrasse.name }}: {{ca.cuirrasse}} (+{{(pj.dex-10)//2}} Dex, +{{armor.cuirrasse["bonus_ca"]}} Armure de cuire, +{{armor.pavois["bonus_ca"]}} Pavois) Dépourvu=CA Contact={{ca.cuirrasse - armor.cuirrasse.bonus_ca}}
                                </li>

                            </ul>
                        </p>
                        <p> Force :{{ pj.for }} (+{{ modificateur(pj.for) }}) </p>
                        <p> Dextérité :{{ pj.dex}} (+{{modificateur(pj.dex)}}) </p>
                        <p> Consitution :{{ pj.con}} (+{{modificateur(pj.con)}}) </p>
                        <p> Sagesse :{{ pj.sag}} ({{modificateur(pj.sag)}}) </p>
                        <p> Intelligence :{{ pj.int}} (+{{modificateur(pj.intel)}}) </p>
                        <p> Charisme :{{ pj.cha}} (+{{modificateur(pj.cha)}}) </p>
                        <p>
                            Jet de sauvegardes :
                            <ul>
                                {%for sauvegarde in sauvegardes.values()%}

                                <li>{{sauvegarde.name}} : {{sauvegarde.value + modificateur(pj.cha) +3}}</li>

                                {%endfor %}
                            </ul>
                        </p>
                    </div>

                </section>

                <section>

                    <h2>{{competence_don_title}}</h2>

                    <h3>{{don_title}}</h3>
                    <ul>
                        {% for don in dons.general%}
                        <li>
                            {{don.name}} : {{don.description}}
                        </li>{% endfor %}
                    </ul>
                    <h3>Aptitudes de classe</h3>
                    <h4>{{dons.class.barbare.name}}</h4>
                    <ul>
                        {% for aptitude in dons.class.barbare.aptitudes%}
                        <li>
                            {{aptitude.name}} : {{aptitude.description}}
                        </li>{% endfor %}
                    </ul>

                    <h4> {{dons.class.rodeur.name}}</h4>
                    {{aptitudeList(dons.class.rodeur.aptitudes)}}
                    <h4> {{dons.class.bellimorphe.name}}</h4>
                    {{aptitudeList(dons.class.bellimorphe.aptitudes)}}
                    <h4> {{dons.class.rodeur.name}}</h4>
                    {{aptitudeList(dons.class.rodeur.aptitudes)}}
                    <h4> {{dons.class.paladin_of_freedom.name}}</h4>
                    {{aptitudeList(dons.class.paladin_of_freedom.aptitudes)}}
                    <h4> {{dons.class.guerrier_lupide.name}}</h4>
                    {{aptitudeList(dons.class.guerrier_lupide.aptitudes)}}

                    <h3>{{competence_title}}</h3>
                    <ul>

                        {% for competence in competences%}

                        <li>
                            {{competence.name}} : {{competence.maitrise + modificateur(pj[competence.carac])}}
                        </li>{%endfor%}
                    </ul>
                </section>

                <section>
                    <h2>{{bag_title}}</h2>
                    <h3>Armes</h3>

                    <ul>

                        {% for weapon in weapons.values() %}

                        <li>
                            {{weapon.name}} : {{weapon.degat}} / {{weapon.critique}}
                        </li>{%endfor%}
                    </ul>
                    <h3>Potions</h3>

                    <ul>

                        {% for potion in potions.values() %}

                        <li>
                            {{potion.nombre}} {{potion.name}} : {{potion.description}}
                        </li>{%endfor%}
                    </ul>
                </section>

            </main>
            <footer></footer>
        </div>
    </body>

    </html>

    </html>